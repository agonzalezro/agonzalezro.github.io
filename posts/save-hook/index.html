<!doctype html><html lang=en><head><title>Save hook for major modes ::
// Álex Go{,5z}</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One of the things I like the most about Go is its go fmt tool. I don&amp;rsquo;t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&amp;rsquo;t have this functionality, in my case, I found this issue working with Elixir &amp;amp; Ruby (happily Python forces you to write well :D)."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://agonzalezro.github.io/posts/save-hook/><link rel=stylesheet href=https://agonzalezro.github.io/assets/style.css><link rel=stylesheet href=https://agonzalezro.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://agonzalezro.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://agonzalezro.github.io/img/favicon.png><link href=https://agonzalezro.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://agonzalezro.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://agonzalezro.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://agonzalezro.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://agonzalezro.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://agonzalezro.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Save hook for major modes"><meta name=twitter:description content="One of the things I like the most about Go is its go fmt tool. I don&rsquo;t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&rsquo;t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D)."><meta property="og:title" content="Save hook for major modes"><meta property="og:description" content="One of the things I like the most about Go is its go fmt tool. I don&rsquo;t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&rsquo;t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D)."><meta property="og:type" content="article"><meta property="og:url" content="https://agonzalezro.github.io/posts/save-hook/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-05-05T00:00:00+00:00"><meta property="article:modified_time" content="2016-05-05T00:00:00+00:00"></head><body><div class=container><header class=header><span class=header__inner><a href=https://agonzalezro.github.io class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>// Álex Go{,5z}</span>
<span class=logo__cursor></span></a><span class=header__right><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Save hook for major modes</h1><div class=post-meta><span class=post-date>05-05-2016</span>
<span class=post-read-time>— 2 min read</span></div><span class=post-tags><a href=https://agonzalezro.github.io/tags/spacemacs/>#spacemacs</a>&nbsp;
<a href=https://agonzalezro.github.io/tags/hook/>#hook</a>&nbsp;</span><div class=post-content><p>One of the things I like the most about Go is its <code>go fmt</code> tool. I don&rsquo;t worry about formatting my code while I am writing it because I know that <code>fmt</code> is going to be there and it will do the work for me later.</p><p>Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&rsquo;t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D).</p><p>Since I got really used to the <code>fmt</code> tool I wanted a similar solution for those languages and it seems that a simple auto indentation all over the file could do it for me. How did I add this behaviour for those languages? Just adding this to my <a href=https://github.com/syl20bnr/spacemacs/blob/master/doc/DOCUMENTATION.org#alternative-setup><code>init.el</code></a>:</p><pre><code>(defun indent-some-languages()
  (case major-mode
    ((elixir-mode ruby-mode) (spacemacs/indent-region-or-buffer))))

(defun dotspacemacs/user-config ()
  ...
  (add-hook 'before-save-hook 'indent-some-languages)
  )
</code></pre><p>What I am doing there is registering a new hook just before saving the file that will check if I am in Ruby or Elixir mode and in that case call <code>spacemacs/indent-region-or-buffer</code> that will indent the whole file for me.</p><p>If you are familiarised with Lisp this snippet will probably look pretty simple to you; but trust me, it took me a while to make it work. This is the reason why I thought it could be interesting to share it.</p><p>I would love to know your tricks for Spacemacs, share them with me here or at <a href=https://twitter.com/agonzalezro>@agonzalezro</a>.</p></div></div></div><footer class=footer><div class=footer__inner><a href=https://agonzalezro.github.io class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>// Álex Go{,5z}</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2022 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://agonzalezro.github.io/assets/main.js></script><script src=https://agonzalezro.github.io/assets/prism.js></script></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-35984509-1','auto'),ga('send','pageview'))</script></body></html>