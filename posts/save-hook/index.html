<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="One of the things I like the most about Go is its go fmt tool. I don&amp;rsquo;t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&amp;rsquo;t have this functionality, in my case, I found this issue working with Elixir &amp;amp; Ruby (happily Python forces you to write well :D)."><meta name=keywords content=",spacemacs,hook"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://agonzalezro.github.io/posts/save-hook/><title>Save hook for major modes :: // Álex Go{,5z}
</title><link rel=stylesheet href=/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Save hook for major modes"><meta itemprop=description content="One of the things I like the most about Go is its go fmt tool. I don’t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don’t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D)."><meta itemprop=datePublished content="2016-05-05T00:00:00+00:00"><meta itemprop=dateModified content="2016-05-05T00:00:00+00:00"><meta itemprop=wordCount content="258"><meta itemprop=keywords content="Spacemacs,Hook"><meta name=twitter:card content="summary"><meta name=twitter:title content="Save hook for major modes"><meta name=twitter:description content="One of the things I like the most about Go is its go fmt tool. I don’t worry about formatting my code while I am writing it because I know that fmt is going to be there and it will do the work for me later.
Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don’t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D)."><meta property="article:published_time" content="2016-05-05 00:00:00 +0000 UTC"><script async src="https://www.googletagmanager.com/gtag/js?id=363076712"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","363076712")}</script></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark></span><span class=logo__text>// Álex Go{,5z}</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
2 minutes</p></div><article><h1 class=post-title><a href=https://agonzalezro.github.io/posts/save-hook/>Save hook for major modes</a></h1><div class=post-content><p>One of the things I like the most about Go is its <code>go fmt</code> tool. I don&rsquo;t worry about formatting my code while I am writing it because I know that <code>fmt</code> is going to be there and it will do the work for me later.</p><p>Said that, the Go layer for Spacemacs is the one that is going to run it for you. Sometimes we need to deal with languages that don&rsquo;t have this functionality, in my case, I found this issue working with Elixir & Ruby (happily Python forces you to write well :D).</p><p>Since I got really used to the <code>fmt</code> tool I wanted a similar solution for those languages and it seems that a simple auto indentation all over the file could do it for me. How did I add this behaviour for those languages? Just adding this to my <a href=https://github.com/syl20bnr/spacemacs/blob/master/doc/DOCUMENTATION.org#alternative-setup><code>init.el</code></a>:</p><pre><code>(defun indent-some-languages()
  (case major-mode
    ((elixir-mode ruby-mode) (spacemacs/indent-region-or-buffer))))

(defun dotspacemacs/user-config ()
  ...
  (add-hook 'before-save-hook 'indent-some-languages)
  )
</code></pre><p>What I am doing there is registering a new hook just before saving the file that will check if I am in Ruby or Elixir mode and in that case call <code>spacemacs/indent-region-or-buffer</code> that will indent the whole file for me.</p><p>If you are familiarised with Lisp this snippet will probably look pretty simple to you; but trust me, it took me a while to make it work. This is the reason why I thought it could be interesting to share it.</p><p>I would love to know your tricks for Spacemacs, share them with me here or at <a href=https://twitter.com/agonzalezro>@agonzalezro</a>.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://agonzalezro.github.io/tags/spacemacs/>spacemacs</a></span>
<span class=tag><a href=https://agonzalezro.github.io/tags/hook/>hook</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
258 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
05 May 2016</p></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.85fad2de4f13fec3bcb3b3cb10430cdb44a7b4a9749b32938241a5c6e77718df7624f1002b880521fdc26e24ec1077fda214bf1cb36ee3045510760d09638cae.js integrity="sha512-hfrS3k8T/sO8s7PLEEMM20SntKl0mzKTgkGlxud3GN92JPEAK4gFIf3CbiTsEHf9ohS/HLNu4wRVEHYNCWOMrg=="></script></body></html>