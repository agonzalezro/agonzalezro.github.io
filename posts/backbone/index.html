<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Today, Oleg gave a talk about backbone at Paylogic. We were using it for a really fancy application inside our backoffice, it was quite funny write it and Oleg decided to share the knowledge.
I used the techtalk to take some notes and, since this piece of code will have no sense out of our backoffice, I&amp;rsquo;ve written a small example that you can find as a gist on my github."><meta name=keywords content=",dev,backbone,underscore,javascript"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://agonzalezro.github.io/posts/backbone/><title>backbone.js + underscore: small intro :: // Álex Go{,5z}
</title><link rel=stylesheet href=/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="backbone.js + underscore: small intro"><meta itemprop=description content="Today, Oleg gave a talk about backbone at Paylogic. We were using it for a really fancy application inside our backoffice, it was quite funny write it and Oleg decided to share the knowledge.
I used the techtalk to take some notes and, since this piece of code will have no sense out of our backoffice, I’ve written a small example that you can find as a gist on my github."><meta itemprop=datePublished content="2012-11-01T00:00:00+00:00"><meta itemprop=dateModified content="2012-11-01T00:00:00+00:00"><meta itemprop=wordCount content="753"><meta itemprop=keywords content="Dev,Backbone,Underscore,Javascript"><meta name=twitter:card content="summary"><meta name=twitter:title content="backbone.js + underscore: small intro"><meta name=twitter:description content="Today, Oleg gave a talk about backbone at Paylogic. We were using it for a really fancy application inside our backoffice, it was quite funny write it and Oleg decided to share the knowledge.
I used the techtalk to take some notes and, since this piece of code will have no sense out of our backoffice, I’ve written a small example that you can find as a gist on my github."><meta property="article:published_time" content="2012-11-01 00:00:00 +0000 UTC"><script async src="https://www.googletagmanager.com/gtag/js?id=363076712"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","363076712")}</script></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark></span><span class=logo__text>// Álex Go{,5z}</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
4 minutes</p></div><article><h1 class=post-title><a href=https://agonzalezro.github.io/posts/backbone/>backbone.js + underscore: small intro</a></h1><div class=post-content><p>Today, <a href=http://twitter.com/olegpidsadnyi/>Oleg</a> gave a talk about
backbone at <a href=http://paylogic.nl/>Paylogic</a>. We were using it for a
really fancy application inside our backoffice, it was quite funny write
it and Oleg decided to share the knowledge.</p><p>I used the techtalk to take some notes and, since this piece of code
will have no sense out of our backoffice, I&rsquo;ve written a small example
that you can find as a <a href=https://gist.github.com/3982819>gist</a> on my
github. I will use it to explain to you some of the useful things that
you can do with backbone and underscore. Feel free to improve it.</p><p>This is only a introductory post, if you want advance stuff you should
go to the <a href=http://backbonejs.org/>backbone official documentation</a> &
<a href=http://underscorejs.org/>underscore docs</a>.</p><h2 id=why>Why?</h2><p>Backbone is really useful when you make complex GUIs on client side. You
can make your code like in a desktop app using events to handle the
actions. It&rsquo;s not needed to pass around instances of parents views,
let&rsquo;s use only the events for that purpose, and let the child decide.</p><p>You have models too, that you can sync (or not) with the server.</p><h2 id=models>Models</h2><p>In backbone you can have local model and sync them with the server or
with local storage (not explained in this intro). In our example we
will:</p><ol><li>Create a collection to save our objects (type Item) in.</li><li>Create the model Item.</li><li>Create 2 object type Item inside this collection.</li><li>Render them.</li></ol><p>The 3 points can be made only with these lines of code. It&rsquo;s really
simple! (after know how to do it :p):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>Item</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Backbone</span>.<span style=color:#a6e22e>Model</span>.<span style=color:#a6e22e>extend</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>Items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Backbone</span>.<span style=color:#a6e22e>Collection</span>.<span style=color:#a6e22e>extend</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>model</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Item</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Items</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>add</span>([{<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;foo&#34;</span>}, {<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;bar&#34;</span>}]);
</span></span></code></pre></div><p><strong>Note</strong>: Setting values in the objects With .set will trigger the event
change. You can silent it in case that needed, but it&rsquo;s really
useful, for example, to save it.</p><p><strong>Second note</strong>: backbone is f***ing clever! Imagine, you are changing a
name, if the name has changed on the collection, the event will be raised,
if not, it will not. This means that if you are editing, but finally
you change your mind and you didn&rsquo;t made any change, the event will
not be raised.</p><h2 id=events>Events</h2><p>They are really useful to remove dependencies between elements. For
example, with jQuery if you change a element from another, the first one
needs to know about the second. With backbone you can catch the event
with the child element and do whatever you want with it.</p><p>On the example of my <a href=https://gist.github.com/3982819>gist</a> I show an
alert box with the name of the element. But you could, for example,
change it to an editable input.</p><p>This is the code of the example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ItemView</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Backbone</span>.<span style=color:#a6e22e>View</span>.<span style=color:#a6e22e>extend</span>({
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>events</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;dblclick&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;onDoubleClick&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onDoubleClick</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>ev</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>.<span style=color:#a6e22e>trim</span>(<span style=color:#a6e22e>$</span>(<span style=color:#a6e22e>ev</span>.<span style=color:#a6e22e>target</span>).<span style=color:#a6e22e>text</span>());
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;Hey! Why do you click on &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;?&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>ev</span>); <span style=color:#75715e>//Play with this :)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>We are binding the <code>dblclick</code> event to the function <code>onDoubleClick</code>.
This function will receive the event, and the event will have the target
(in this case the <code>&lt;li/></code> that we are clicking.</p><h2 id=underscore>Underscore</h2><p>It&rsquo;s really useful to Work with collections. In out example we are using
it to iterate over the items:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>render</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>_</span>.<span style=color:#a6e22e>each</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>models</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>item</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>itemview</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ItemView</span>(<span style=color:#a6e22e>item</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>el</span>).<span style=color:#a6e22e>append</span>(<span style=color:#a6e22e>itemview</span>.<span style=color:#a6e22e>render</span>().<span style=color:#a6e22e>el</span>);
</span></span><span style=display:flex><span>  }, <span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If you read carefully this piece of code you will realize that we are
instantiating a new ItemView for each particular item, so it has its own
container element created on the fly, re-renderable each time when data
is updated and all events are delegated to this element.</p><p>The amazing thing that you can do with underscore is use templates (yes,
like jinja or django-templates, but in JS)! And we are doing it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ItemView</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Backbone</span>.<span style=color:#a6e22e>View</span>.<span style=color:#a6e22e>extend</span>({
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>_</span>.<span style=color:#a6e22e>template</span>(<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;#item-template&#34;</span>).<span style=color:#a6e22e>html</span>()),
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>el</span>).<span style=color:#a6e22e>html</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>template</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>toJSON</span>()));
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/template&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item-template&#34;</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;%=</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>%&gt;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=extra-ball>Extra ball</h2><p>Use <code>_.debounce</code> to don&rsquo;t call the functions thousands of times, example
drag&amp;dropping an element it will be useful.</p><p>For example in our project we had to sort with drag and drop some
elements of a list, instead send this event in each drag movement, we
made it after 200s being quiet with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>onChange</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>_</span>.<span style=color:#a6e22e>debounce</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>ev</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>pools</span>.<span style=color:#a6e22e>save</span>();
</span></span><span style=display:flex><span>}, <span style=color:#ae81ff>200</span>),
</span></span></code></pre></div><p>Please comment your thoughts about the post. We are all here to learn,
and it&rsquo;s really easy that I made some mistake explaining this.
Furhtermore, I know that my English is not really good, so, I will
apreciate constructive comments about it too :)</p><p>Enjoy it!</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://agonzalezro.github.io/tags/dev/>dev</a></span>
<span class=tag><a href=https://agonzalezro.github.io/tags/backbone/>backbone</a></span>
<span class=tag><a href=https://agonzalezro.github.io/tags/underscore/>underscore</a></span>
<span class=tag><a href=https://agonzalezro.github.io/tags/javascript/>javascript</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
753 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
01 Nov 2012</p></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.85fad2de4f13fec3bcb3b3cb10430cdb44a7b4a9749b32938241a5c6e77718df7624f1002b880521fdc26e24ec1077fda214bf1cb36ee3045510760d09638cae.js integrity="sha512-hfrS3k8T/sO8s7PLEEMM20SntKl0mzKTgkGlxud3GN92JPEAK4gFIf3CbiTsEHf9ohS/HLNu4wRVEHYNCWOMrg=="></script></body></html>